<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Guide Widget - Example</title>
    <script src="dist/command-guide-amplified.js"></script>
    <!-- <script src="https://unpkg.com/command-guide-amplified/dist/command-guide-amplified.min.js"></script> -->
    <link rel="stylesheet" href="styles.css">
   
</head>
<body>
    <div class="container">
        <h1>Command Guide Amplified - Example</h1>
        
        <section>
            <div class="cga-widget" id="docker-guide">
                <h4>Docker</h4>
                <p>Make it easy to follow along with the guide. Copy & paste, no need to replace values each time.</p>
                <div class="cga-variables">
                    <div class="cga-variable">
                        <label>Image Name:</label>
                        <input type="text" class="cga-var-IMAGE_NAME" value="my-service">
                    </div>
                    <div class="cga-variable">
                        <label>Port:</label>
                        <input type="text" class="cga-var-PORT" value="8080">
                    </div>
                    <div class="cga-variable">
                        <label>Environment:</label>
                        <select class="cga-var-ENV">
                            <option value="DEV">DEV</option>
                            <option value="STAGING">STAGING</option>
                            <option value="PROD">PROD</option>
                        </select>
                    </div>
                </div>
                
                <div class="cga-commands">
                    <h4>Commands</h4>
                    Docker build image:
                    <div class="cga-command">docker build -t {IMAGE_NAME} .</div>

                    Docker run and bind port:
                    <div class="cga-command">docker run -p {PORT}:{PORT} {IMAGE_NAME}</div>

                    Docker run with environment variable:
                    <div class="cga-command">docker run -e ENV={ENV} {IMAGE_NAME}</div>


                    Docker run with environment variable and bind port:
                    <div class="cga-command">docker run -e ENV={ENV} -p {PORT}:{PORT} {IMAGE_NAME}</div>
                </div>
            </section>

            <section>
                <div class="cga-widget" data-cga-widget>
                    <h4>Networking</h4>

                    <p>Make the guide relateable to the user by show output similar adapted to user's case.</p>
                    <div class="cga-variables">
                        <div class="cga-variable">
                            <label>Device IP:</label>
                            <input type="text" class="cga-var-DEVICE_IP" value="192.168.64.20">
                        </div>
                    </div>


                    SSH into the device:
                    <div class="cga-command">ssh root@{DEVICE_IP}</div>

                    Output:
                    <div class="cga-text">ssh: connect to host {DEVICE_IP} port 22: Connection refused
ssh: connect to host {DEVICE_IP} port 22: Connection refused
...
...
ssh: connect to host {DEVICE_IP} port 22: Operation timed out</div>

                    Ping the device:
                    <div class="cga-command">ping {DEVICE_IP}</div>

                    Output:
                    <div class="cga-text">PING {DEVICE_IP} ({DEVICE_IP}): 56 data bytes
Request timeout for icmp_seq 0
Request timeout for icmp_seq 1
Request timeout for icmp_seq 2              
...
ping: sendto: Host is down
Request timeout for icmp_seq 35
ping: sendto: Host is down
Request timeout for icmp_seq 36
...

64 bytes from {DEVICE_IP}: icmp_seq=2 ttl=64 time=1016.290 ms
64 bytes from {DEVICE_IP}: icmp_seq=3 ttl=64 time=11.144 ms
64 bytes from {DEVICE_IP}: icmp_seq=4 ttl=64 time=6.337 ms
64 bytes from {DEVICE_IP}: icmp_seq=5 ttl=64 time=3.255 ms</div>    

                </div>
            </section>

            
        <section>
            <div class="cga-widget" id="api-guide">
                <h3>API</h3>
                <div class="cga-variables">
                    <div class="cga-variable">
                        <label>API URL:</label>
                        <input type="text" class="cga-var-API_URL" value="https://api.example.com">
                    </div>
                    <div class="cga-variable">
                        <label>API Key:</label>
                        <input type="text" class="cga-var-API_KEY" value="sk-123_f0rfiVE5iX">
                    </div>
                </div>
                
                <div class="cga-commands">
                    <div class="cga-command">curl -H "Authorization: Bearer {API_KEY}" {API_URL}/data</div>
                    <div class="cga-command">curl -X GET {API_URL}/status</div>
                </div>
            </div>
        </section>

        <section>
            <div class="cga-widget" id="python-guide">
                <h3>Python</h3>
                <p>Code examples that work for everyones own case.</p>
                <div class="cga-variables">
                    <div class="cga-variable">
                        <label>IP Address:</label>
                        <input type="text" class="cga-var-IP_ADDRESS" value="192.168.64.20">
                    </div>
                    <div class="cga-variable">
                        <label>User:</label>
                        <input type="text" class="cga-var-USER" value="root">
                    </div>
                    <div class="cga-variable">
                        <label>Password:</label>
                        <input type="text" class="cga-var-PASSWORD" value="*******">
                    </div>
                </div>

                <div class="cga-text">#!/usr/bin/python3
import requests
import json

IPADDR = "{IP_ADDRESS}"
USER = "{USER}"
PW = "{PASSWORD}"

url = 'https://{IP_ADDRESS}/ubus'

# Create a session
session = requests.Session()

# JSON payload for login request
login_payload = {
    "jsonrpc": "2.0",
    "id": 1,
    "method": "call",
    "params": [
        "00000000000000000000000000000000", 
        "session", 
        "login", {
            "username": {USER}, 
            "password": {PASSWORD}
        }
    ]
}

# Send the login POST request
response = session.post(url, json=login_payload, verify=False)

# Parse the JSON response
data = json.loads(response.text)

# Extract the desired value (token)
token = data['result'][1]['ubus_rpc_session']

# Print the token
print("Token:", token)

# Close the session
session.close()</div>
            </div>
        </section>

        <div class="cga-widget" id="my-guide">
            <h3>Agent</h3>
    
            <!-- Add your variables -->
            <div class="cga-variables">
                <div class="cga-variable">
                    <label>Name:</label>
                    <input type="text" class="cga-var-NAME" value="James">
                </div>
                <div class="cga-variable">
                    <label>Surname:</label>
                    <input type="text" class="cga-var-SURNAME" value="Bond">
                </div>
                <div class="cga-variable">
                    <label>ID:</label>
                    <select class="cga-var-ID">
                        <option value="007">007</option>
                        <option value="008">008</option>
                        <option value="009">009</option>
                    </select>
                </div>
            </div>
        
            <!-- Add your commands or text with placeholders -->
        
            Lines of text that could be some output, or longer code snippets..
            <div class="cga-text">#!/usr/bin/python3
name = "{NAME}"
surname = "{SURNAME}"
id = "{ID}"

print(f"The name's {surname}. {name} {surname} (ID: {id})")</div>
        
            Output:
            <div class="cga-text">The name's {SURNAME}. {NAME} {SURNAME} (ID: {ID})</div>

            Or a line of text that can be copied:
            <div class="cga-command">The name's {SURNAME}. {NAME} {SURNAME} (ID: {ID})</div>
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            CommandGuideAmplifiedWidget.init('docker-guide');
            CommandGuideAmplifiedWidget.init('api-guide');
            CommandGuideAmplifiedWidget.init('python-guide');
            CommandGuideAmplifiedWidget.init('my-guide');
            
        });
    </script>
</body>
</html>
